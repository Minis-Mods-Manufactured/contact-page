<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home Price Calculator | Affordable Homes of Crestview</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 30px 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    p {
      text-align: center;
      max-width: 700px;
      margin: 0 auto 40px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 20px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 1rem;
    }
    .section-divider {
      margin: 40px 0 30px;
    }
    .blue-box {
      background-color: #e8f0ff;
      border-radius: 8px;
      padding: 20px;
    }
    table {
      width: 100%;
      font-size: 16px;
    }
    td {
      padding: 5px 0;
    }
  </style>
</head>
<body>
  <div id="shared-header"></div>
  <div class="container">
    <h1>üè° Home Price & Down Payment Estimator</h1>
    <p>Use this calculator to estimate taxes, land improvement costs, and typical loan down payments based on your project total.</p>

    <form onsubmit="event.preventDefault(); calculate();">
      <label for="loanType">Loan Type:</label>
      <select id="loanType">
        <option value="landhome">Land/Home Package</option>
        <option value="homeonly">Home-Only Loan</option>
      </select>

      <label for="loanProgram">Loan Program:</label>
      <select id="loanProgram">
        <option value="none">-- Select --</option>
        <option value="vausda">VA / USDA (0%)</option>
        <option value="fha">FHA (3.5%)</option>
        <option value="5">5%</option>
        <option value="10">10%</option>
        <option value="20">20%</option>
      </select>

      <label for="price">Enter Home Price ($):</label>
      <input type="text" id="price" placeholder="e.g. 200000" required />

      <label for="state">Select State:</label>
      <select id="state">
        <option value="fl">Florida</option>
        <option value="al">Alabama</option>
      </select>

      <label for="county">If FL, Choose County:</label>
      <select id="county">
        <option value="escambia">Escambia</option>
        <option value="other">Other</option>
      </select>

      <label for="land">Enter Land Cost ($):</label>
      <input type="text" id="land" placeholder="e.g. 30000" />

      <label for="improvements">Enter Land Improvements ($):</label>
      <input type="text" id="improvements" placeholder="e.g. 15000" />

      <p style="font-size: 14px; color: #555;">
        üí° Common land improvements include site clearing, septic or sewer setup, water access (well or tap), grading, and utility hookups.
      </p>
    </form>

    <div id="result" style="margin-top: 30px;"></div>

    <hr class="section-divider" />

    <div class="blue-box">
      <h3 style="text-align: center;">üí∞ Typical Down Payments<br><small>Based on the full estimated project total:</small></h3>
      <table>
        <thead>
          <tr>
            <th style="text-align:left;">Loan Program</th>
            <th style="text-align:right;">Down Payment</th>
            <th style="text-align:right;">Amount to Finance</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>VA/USDA (0% Down):</td><td style="text-align:right;" id="dp-0">$0.00</td><td style="text-align:right;" id="loan-0">$0.00</td></tr>
          <tr><td>FHA (3.5% Down):</td><td style="text-align:right;" id="dp-3">$0.00</td><td style="text-align:right;" id="loan-3">$0.00</td></tr>
          <tr><td>5% Down:</td><td style="text-align:right;" id="dp-5">$0.00</td><td style="text-align:right;" id="loan-5">$0.00</td></tr>
          <tr><td>10% Down:</td><td style="text-align:right;" id="dp-10">$0.00</td><td style="text-align:right;" id="loan-10">$0.00</td></tr>
          <tr><td>20% Down:</td><td style="text-align:right;" id="dp-20">$0.00</td><td style="text-align:right;" id="loan-20">$0.00</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    const parse = val => parseFloat(val.replace(/[^0-9.]/g, "")) || 0;
    const fmt = n => n.toLocaleString("en-US", { style: "currency", currency: "USD" });

    const ids = ["price", "land", "improvements", "loanType", "loanProgram", "state", "county"];
    ids.forEach(id => document.getElementById(id).addEventListener("input", calculate));

    function calculate() {
      const loanType = document.getElementById("loanType").value;
      const program = document.getElementById("loanProgram").value;
      const price = parse(document.getElementById("price").value);
      const land = parse(document.getElementById("land").value);
      const improvements = parse(document.getElementById("improvements").value);
      const state = document.getElementById("state").value;
      const county = document.getElementById("county").value;

      const govExtra = ["vausda", "fha"].includes(program) ? (price <= 100000 ? 5000 : 10000) : 0;
      const taxableHome = price + govExtra + (loanType === "homeonly" ? improvements : 0);

      let tax = 0;
      if (state === "fl") {
        tax = taxableHome * 0.03 + (county === "escambia" ? 75 : 50);
      } else if (state === "al") {
        tax = taxableHome * 0.055;
      }

      const houseSubtotal = taxableHome + tax;
      const landSubtotal = land + (loanType === "landhome" ? improvements : 0);
      const total = houseSubtotal + landSubtotal;

      const down = pct => total * (pct / 100);

      document.getElementById("result").innerHTML = `
        <table><tbody>
          <tr><td>üè† Home Price:</td><td style="text-align:right;">${fmt(price)}</td></tr>
          ${govExtra ? `<tr><td>‚ö†Ô∏è Gov Loan Add-on:</td><td style="text-align:right;">${fmt(govExtra)}</td></tr>` : ""}
          ${loanType === "homeonly" ? `<tr><td>üîß Improvements (taxed):</td><td style="text-align:right;">${fmt(improvements)}</td></tr>` : ""}
          <tr><td>üí∞ Taxes:</td><td style="text-align:right;">${fmt(tax)}</td></tr>
          <tr><td><strong>üè° House Subtotal:</strong></td><td style="text-align:right;"><strong>${fmt(houseSubtotal)}</strong></td></tr>
          <tr><td>üåæ Land:</td><td style="text-align:right;">${fmt(land)}</td></tr>
          ${loanType === "landhome" ? `<tr><td>üõ†Ô∏è Improvements:</td><td style="text-align:right;">${fmt(improvements)}</td></tr>` : ""}
          <tr><td><strong>üå≥ Land Subtotal:</strong></td><td style="text-align:right;"><strong>${fmt(landSubtotal)}</strong></td></tr>
          <tr><td colspan="2"><hr /></td></tr>
          <tr><td><strong>üíµ Total Estimate:</strong></td><td style="text-align:right;"><strong>${fmt(total)}</strong></td></tr>
        </tbody></table>`;

      [[0, "dp-0", "loan-0"], [3.5, "dp-3", "loan-3"], [5, "dp-5", "loan-5"], [10, "dp-10", "loan-10"], [20, "dp-20", "loan-20"]]
        .forEach(([p, dpId, loanId]) => {
          const dp = down(p);
          document.getElementById(dpId).textContent = fmt(dp);
          document.getElementById(loanId).textContent = fmt(total - dp);
        });
    }
  </script>
</body>
</html>
